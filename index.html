<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Document</title>
  <link rel="stylesheet" href="updown.css">
  <link rel="stylesheet" href="funnel.css">
  <script src="angular.min.js"></script>
</head>
<body>

  <div ng-controller="MyCtrl">
    <div dpda-funnel data="funnel" style="margin:0 auto;width:400px"></div>
  </div>
  <script src="dpda.js"></script>
  <script>
  var app = angular.module('app',['dpda']);

  app.controller('MyCtrl',function($scope){
    console.log("my ctrl");
    $scope.funnel = {
      name: "标题",
      headers: [{
        label: "Rate",
        value: "20%"
      },{
        label: "支付率",
        value: "12%"
      }],
      ratekey: "pv",
      nodes: [{
        url: "http://www.dianping.com",
        name: "首页",
        pv:"22010",
        mv:"123123"
      },{
        url: "http://www.dianping.com/search",
        name: "搜索页",
        pv:"4784",
        mv:"1718"
      },{
        url: "http://www.dianping.com/shop/12312",
        name: "商户页",
        pv:"1718",
        mv:"1718"
      }]
    };

    $scope.data = {
      entryPages: [{
        "name": "Direct entry",
        "pv": 11913
      },{
        "name": "http://www.google.com",
        "pv": 1342
      },{
        "name":"All other",
        "pv":7843
      }],
      convertionRate: [{
        name:"http://www.dianping.com",
        pv:"22010"
      },{
        name:"http://www.dianping.com/shanghai",
        pv:"4784"
      },{
        name:"http://www.dianping.com/shop/123",
        pv:"1718"
      }],
      exitPages: [
        [{
          name:"left site",
          out_pv:"14832"
        },{
          name:"http://a",
          out_pv:"329"
        },{
          name:"http://b",
          out_pv:"259"
        },{
          name:"http://c",
          out_pv:"252"
        },{
          name:"All other",
          out_pv:1554
        }],
        [{
          name:"Left site",
          out_pv:"2102"
        },{
          name:"http://d",
          out_pv:"177"
        },{
          name:"http://e",
          out_pv:"133"
        }],
        [{
          name:"Left site",
          out_pv:"1622"
        },{
          name:"http://d",
          out_pv:"28"
        },{
          name:"http://e",
          out_pv:"28"
        }]
      ]
    };
  });

  angular.bootstrap(document.body, ['app']);

  </script>
</body>
</html>